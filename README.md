# Финальный проект курса Go-разработчик с нуля "Планировщик" (версия 1.1)
Это программа-органайзер для размещения и контроля разных дел и событий пользователя.
Событие обязательно имеет название и дату. Также событие может иметь комментарий и правило повторения.
<Изменено: SQLite на PostreSQL.>
Реализовано 4 вида правил повторения: 
1. Через определенный интервал в днях
2. Каждый год.
3. В определенные дни недели.
4. В определенные дни месяца или месяцев.

События можно добавлять, редактировать, удалять, "выполнять". При выполнении задания событие без правила повторения будет удалено.
При наличии правила повторения событие будет перенесено на ближайщую дату согласно правилу повторения. Меняются алгоритмы на соответствие логики а не тестам. Тесты будут изменены. В первоначальной версии код исправлялся на предмет соответствия тестам а не логиге.


# Список выполенных заданий со звёздочкой: 
1. Реализована возможность определять из вне порт при запуске сервера. Если существует переменная окружения TODO_PORT, сервер при старте будет слушать порт со значением этой переменной. 
2. Реализована возможность определять путь к файлу базы данных через переменную окружения. Для этого сервер должен получает значение переменной окружения TODO_DBFILE и использует его в  качестве пути к базе данных, если это не пустая строка.
3. Реализованы правила повторения для дней недели и дней месяца/месяцев.
4. Реализован поиск по дате события и поиск по строке в названии или коментарии события. 

# Инструкция по запуску кода локально: 
Для локального запуска прораммы используйте команду go run main.go. После запуска программы в строке браузера наберите localhost:7540/
Пароль `12111`. Добавляйте, редактируйте, удаляйте, "выполняйте" свои задания и события. Интерфейс интуитивно понятен.

# Инструкция по запуску тестов. 
Для запуска тестов используйте команду go test ./tests. Отмечу что тесты проверяются только при запущенной программе. Т.е. сначала запускаем программу и, если она запустилась, то только тогда можно запускать тесты
Файл settings.go:

var Port = 7540

var FullNextDate = true

var Search = true

var Token = "106ca1b823ceb804d7c014a5019632a780f7ce32c7a8737abe41de56f2037c7d"

# Инструкция по сборке и запуску проекта через Docker:
Подготовлены 2 вида сборки для большого и малого образов. Большой образ собирается в один этап при помощи текущего `Dockerfile`. Для сборки используйте команду (незабываем точку в конце команды):
docker build -t (image name):(version) .

(image name) любое название, например gfpbig\

(version) например v1.0.1


Перед запуском убедитесь, что доступна БД dbscheduler в PostgreSQL.
Для запуска используйте команду:

//docker run --rm -it -p 7540:7540 -v //$(PWD)/scheduler.db:/app/scheduler.db (image name):(version)
??? docker run --rm -it -p 7540:7540 -v 5432:5432 (image name):(version)

(image name) и (version) должны быть такими же как на предыдущем шаге

Отмечу, что в этом образе можно запустить тесты. 

Для сборки малого образа нужно переименовать Dockerfile например в Dockerfile1
А Docerfile2 в Dockerfile
После этого используйте команду (не забываем точку в конце команды):

docker build -t (image name):(version) .

Для запуска программы используйте команду:

docker run --rm -it -p 7540:7540 -v //$(PWD)/scheduler.db:/apps/scheduler.db (image name):(version)

Все действия выполнялись под windows 10
